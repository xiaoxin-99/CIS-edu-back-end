<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sczyjsxy.jkx.cis.edubackend.mapper.ActivitiesMapper">

    <select id="getCourseName" resultType="java.lang.String">
        select c.course_name from course c inner join teaching_activities ta on c.course_id = ta.course_id
        where ta.teaching_activities_id = #{id};
    </select>

    <select id="getTeacherName" resultType="java.lang.String">
        select t.teacher_name from teacher t inner join teaching_activities ta on t.teacher_id = ta.teacher_id
        where ta.teaching_activities_id = #{id};
    </select>

    <select id="getScheduleId" resultType="java.lang.String">
        select s.schedule_id from teaching_activities ta inner join schedule s
        on ta.teaching_activities_id = s.teaching_activities_id where  ta.teaching_activities_id  = #{id};
    </select>

    <select id="getActivitiesAndCourseMap" resultType="java.util.Map">
        select ta.teaching_activities_id activities, ta.course_id course
        from teaching_class tc inner join teaching_activities ta
        on tc.teaching_class_id = ta.teaching_class_id
        where
        <foreach item="item" index="index" collection="ids" open="" separator="or" close="">
            tc.teaching_class_id = #{item}
        </foreach>
        and  ta.semester = #{semester};
    </select>

    <resultMap id="activities" type="com.sczyjsxy.jkx.cis.edubackend.model.dao.Activities">
        <id column="teaching_activities_id"  property="activitiesId" />
        <result column="course_id" property="course.courseId" />
        <result column="teacher_id" property="teacher.id" />
        <result column="semester" property="semester" />
        <result column="week_period" property="weekPeriod" />
        <result column="credit" property="credit" />
        <result column="proportion" property="proportion" />
        <result column="remark" property="remark" />
    </resultMap>

    <select id="getActivitiesByTeachingClassId" resultMap="activities">
        select teaching_activities_id, course_id, teacher_id, semester, plan,
         week_period, credit, proportion, remark
        from teaching_activities
        where
        <foreach item="item" index="index" collection="ids" open="" separator="or" close="">
            teaching_class_id = #{item}
        </foreach>
        and semester = #{semester};
    </select>


</mapper>